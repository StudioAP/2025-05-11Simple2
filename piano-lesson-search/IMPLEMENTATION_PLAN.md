# ピアノ・リトミック教室検索サイト 実装計画

## プロジェクト概要
ピアノ教室およびリトミック教室の情報を掲載し、エンドユーザーが検索・閲覧・問い合わせを行えるウェブサイトを構築します。教室運営者は自身の教室情報を登録・編集し、月額課金によって情報を公開できます。

## 技術スタック
- **フロントエンド**: Next.js (^14), React (^19.0.0), Tailwind CSS (^3.4.17), shadcn/ui (^2.1.8)
- **バックエンド/データベース**: Supabase
- **決済**: Stripe Payment Links (月額500円)
- **開発ツール**: TypeScript (^5.0.0), Node.js (^20.0.0), npm (^10.0.0)

## 実装計画チェックリスト

### 1. プロジェクト初期設定
- [x] プロジェクト作成（Next.js + Supabase）
- [x] 技術スタックの導入確認
- [x] 環境変数の設定
- [x] Supabaseプロジェクト作成
- [ ] Stripeアカウント設定

### 2. データベース設計
- [x] ユーザーテーブル（profiles）の作成
- [x] 教室情報テーブル（schools）の作成
- [x] 教室種別マスタテーブル（school_types）の作成
- [x] 教室写真テーブル（school_photos）の作成
- [x] お知らせテーブル（school_announcements）の作成
- [x] 全文検索用のインデックスとトリガー設定
- [x] ストレージバケットの設定
- [ ] RLSポリシーの詳細設定と検証

### 3. 認証機能
- [x] ログインページの作成
- [x] 新規登録ページの作成
- [x] 認証状態の管理
- [x] パスワードリセット機能の実装
- [ ] メール認証の設定
- [ ] 認証エラーハンドリングの強化

### 4. エンドユーザー向け機能
- [x] トップページの作成（検索フォーム）
- [x] 検索結果表示ページの作成
- [x] 教室詳細ページの作成
- [x] 問い合わせフォームの作成
- [x] 検索アルゴリズムの最適化
- [x] 検索結果のソート・フィルター機能
- [ ] 問い合わせメール送信機能の実装

### 5. 教室運営者向け機能
- [x] ダッシュボードページの作成
- [x] 教室情報編集ページの作成
- [x] 教室写真アップロード機能の実装
- [x] お知らせ管理機能の実装
- [x] プロフィール編集ページの作成
- [ ] 統計情報表示の実装（閲覧数、問い合わせ数）

### 6. 決済機能
- [x] サブスクリプション管理ページの作成
- [ ] Stripe Payment Links連携
- [ ] 決済ステータス管理の実装
- [ ] 決済履歴表示の実装
- [ ] キャンセル処理の実装

### 7. UI/UX最適化
- [x] レスポンシブデザインの実装
- [x] ダークモード対応
- [ ] アクセシビリティ対応
- [ ] ローディング状態の改善
- [ ] エラー表示の最適化
- [ ] アニメーションの追加

### 8. テストと品質保証
- [ ] 単体テストの作成
- [ ] E2Eテスト（Playwright）の実装
- [ ] パフォーマンス最適化
- [ ] セキュリティチェック
- [ ] クロスブラウザテスト

### 9. デプロイと運用準備
- [ ] 本番環境のSupabase設定
- [ ] 本番環境のStripe設定
- [ ] CI/CDパイプラインの構築
- [ ] 監視とログ収集の設定
- [ ] バックアップ戦略の策定

### 10. ドキュメント作成
- [ ] 利用規約・プライバシーポリシーの作成
- [ ] ユーザーマニュアルの作成
- [ ] 管理者マニュアルの作成
- [ ] APIドキュメントの作成
- [ ] 技術ドキュメントの作成

## 現在の進捗状況
- **完了したタスク**: 24/50（約48%）
- **進行中のタスク**: データベースRLSポリシーの詳細設定、メール認証の設定、Stripe決済連携
- **次のステップ**: 
  1. メール認証の設定
  2. Stripe決済連携の実装
  3. 問い合わせメール送信機能の実装
  4. E2Eテストの作成と実行

## 優先度の高い課題
1. メール認証の設定
2. Stripe決済連携の実装
3. 問い合わせメール送信機能の実装
4. 統計情報表示の実装
5. E2Eテストの作成と実行

## タイムライン
- **フェーズ1（基本機能）**: 完了
- **フェーズ2（拡張機能）**: 進行中（〜5月20日予定）
- **フェーズ3（最適化とテスト）**: 未着手（〜5月30日予定）
- **ローンチ準備**: 未着手（〜6月5日予定）
- **本番リリース**: 6月10日予定
