# Stripe決済テスト

このディレクトリには、Stripe決済フローをテストするためのE2Eテストが含まれています。

## テストの実行方法

```bash
# すべてのテストを実行
npm run test:e2e

# 特定のテストファイルを実行
npx playwright test stripe-payment.spec.ts

# UIモードでテストを実行（デバッグに便利）
npx playwright test --ui
```

## テストシナリオ

1. **サブスクリプション登録フロー**
   - ログイン
   - サブスクリプションページに移動
   - 支払いボタンをクリック
   - Stripeの決済ページでカード情報を入力
   - 決済完了後、サブスクリプションのステータスが「アクティブ」になることを確認

2. **サブスクリプションキャンセルフロー**
   - ログイン
   - サブスクリプションページに移動
   - キャンセルボタンをクリック
   - キャンセル完了のメッセージが表示されることを確認

3. **決済失敗のテスト**
   - 残高不足のカードを使用して決済が失敗するケースをテスト
   - エラーメッセージが表示されることを確認

4. **3Dセキュア認証のテスト**
   - 3Dセキュア認証が必要なカードを使用
   - 認証フローを完了し、決済が成功することを確認

## テスト用カード情報

テスト用のカード情報は `stripe-test-data.ts` に定義されています。

- **成功するカード**: 4242 4242 4242 4242
- **残高不足のカード**: 4000 0000 0000 9995
- **3Dセキュア認証が必要なカード**: 4000 0000 0000 3220

## 注意事項

- これらのテストはテスト環境でのみ実行してください
- 本番環境では実際のカード情報を使用しないでください
- テストユーザーアカウントが事前に作成されている必要があります
